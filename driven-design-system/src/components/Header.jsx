import React, { useState } from 'react';

export const Header = ({ onNavigate, watchlistCount, user, onDashboard }) => {
    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

    const navItems = [
        { label: 'Buy', hasDropdown: true },
        { label: 'Sell', hasDropdown: false },
        { label: 'Rent', hasDropdown: true },
        { label: 'Invest', hasDropdown: false },
        { label: 'Projects', hasDropdown: false },
        { label: 'Services', hasDropdown: false },
        { label: 'Content Hub', hasDropdown: true },
        { label: 'Find Agent', hasDropdown: false },
    ];

    return (
        <>
            <header className="bg-white sticky top-0 z-50 transition-colors duration-300" style={{ borderBottom: '1px solid rgba(216,206,190,0.32)', boxShadow: '0px 1px 16.6px 0px rgba(199,165,110,0.03)' }}>
                <div className="px-4 md:px-[80px]">
                    {/* Three-column layout: logo | nav (absolutely centred) | actions */}
                    <div className="relative flex items-center justify-between h-[66px]">

                        {/* ── LEFT: Logo ── */}
                        <button onClick={() => onNavigate && onNavigate('search')} className="flex items-center flex-shrink-0 z-10">
                            <svg className="h-6" viewBox="0 0 159 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clipPath="url(#clip0_1945_142534)">
                                    <path d="M23.3936 5.86722H18.5605V18.138H23.3936C27.2348 18.138 29.899 15.7097 29.899 12.0115C29.899 8.31324 27.2348 5.86722 23.3936 5.86722ZM23.3936 15.8386H21.1704V8.16662H23.3936C25.9111 8.16662 27.2348 9.84148 27.2348 12.0115C27.2348 14.1815 25.8193 15.8386 23.3936 15.8386Z" fill="black" />
                                    <path d="M41.1526 9.82322C41.1526 7.54207 39.5904 5.86722 37.0364 5.86722H31.3027V18.1375H33.9121V13.7411H35.8228L38.2302 18.1375H41.2256L38.4691 13.4641C39.7918 13.1526 41.152 11.9932 41.152 9.82269L41.1526 9.82322ZM36.6503 11.496H33.9121V8.11079H36.6503C37.6974 8.11079 38.4879 8.77447 38.4879 9.80339C38.4879 10.8323 37.698 11.496 36.6503 11.496Z" fill="black" />
                                    <path d="M45.2744 5.86722H42.665V18.1375H45.2744V5.86722Z" fill="black" />
                                    <path d="M52.3144 15.3038L48.9152 5.86722H45.938L50.6792 18.1375H53.9502L58.6732 5.86722H55.696L52.3144 15.3038Z" fill="black" />
                                    <path d="M59.3594 18.1375H68.0331V15.8746H61.9687V13.0237H67.9048V10.7786H61.9687V8.11079H68.0331V5.86722H59.3594V18.1375Z" fill="black" />
                                    <path d="M77.9804 13.8147L72.3015 5.86722H69.6187V18.1375H72.228V9.89626L78.0717 18.1375H80.5887V5.86722H77.9804V13.8147Z" fill="black" />
                                    <path d="M1.43954 11.6494H0V18.1484H1.43954V11.6494Z" fill="black" />
                                    <path d="M3.96591 10.562H2.52637V17.0611H3.96591V10.562Z" fill="black" />
                                    <path d="M6.49228 11.6494H5.05273V18.1484H6.49228V11.6494Z" fill="black" />
                                    <path d="M0 10.562H1.43954V7.30832H10.8286V16.7079H7.57859V18.149H12.2687V5.86722H0V10.562Z" fill="black" />
                                    <path d="M104.985 21.3401C105.409 21.3401 105.833 21.5895 106.008 21.6896L106.058 21.1658C106.058 21.1658 105.609 21.0411 105.01 21.0411C104.412 21.0411 103.638 21.3656 103.613 22.4133C103.613 23.4615 104.212 23.9603 105.06 23.9603C105.683 23.9603 106.058 23.736 106.058 23.736V22.538H105.559V23.5862C105.559 23.5862 105.459 23.6363 105.285 23.6363C104.661 23.6363 104.212 23.1375 104.212 22.3387C104.212 21.7898 104.436 21.3406 104.985 21.3406V21.3401Z" fill="black" />
                                    <path d="M108.204 23.6108V21.0907H107.58V23.9353H109.277V23.5111C109.277 23.5111 108.903 23.6108 108.379 23.6108H108.204H108.204Z" fill="black" />
                                    <path d="M111.871 21.0411C111.172 21.0411 110.399 21.4402 110.399 22.5135C110.399 23.4866 110.998 23.9859 111.771 23.9859C112.47 23.9859 113.243 23.5868 113.243 22.5135C113.243 21.5404 112.644 21.0411 111.871 21.0411ZM111.896 23.6609C111.347 23.6609 111.022 23.0368 111.022 22.3382C111.022 21.7643 111.272 21.3651 111.721 21.3651C112.295 21.3651 112.619 21.9891 112.619 22.6878C112.619 23.2617 112.37 23.6609 111.895 23.6609H111.896Z" fill="black" />
                                    <path d="M116.112 22.3632C116.112 22.3632 116.636 22.1884 116.636 21.7147C116.636 21.0907 115.963 21.0661 115.439 21.0661C115.139 21.0661 114.666 21.1162 114.666 21.1162V23.9108C114.666 23.9108 115.14 23.9358 115.439 23.9358C116.112 23.9358 116.836 23.7861 116.836 23.0624C116.836 22.4634 116.112 22.3638 116.112 22.3638V22.3632ZM115.264 21.3901C115.264 21.3901 115.364 21.3651 115.513 21.3651C115.788 21.3651 116.062 21.4648 116.062 21.7893C116.062 22.1389 115.838 22.3131 115.488 22.3131C115.339 22.3131 115.264 22.2631 115.264 22.3131V21.3901ZM115.614 23.6609C115.414 23.6609 115.265 23.6108 115.265 23.6108V22.6126C115.29 22.5876 115.414 22.5876 115.489 22.5876H115.639C115.988 22.6126 116.188 22.837 116.188 23.1114C116.188 23.4109 115.988 23.6603 115.614 23.6603V23.6609Z" fill="black" />
                                    <path d="M118.957 21.0907L117.958 23.9103H118.433L118.707 23.0869H119.78L120.079 23.9103H120.703L119.655 21.0907H118.957ZM118.782 22.7874L119.207 21.5649L119.631 22.7874H118.782Z" fill="black" />
                                    <path d="M122.524 23.6108V21.0907H121.925V23.9353H123.597V23.5111C123.597 23.5111 123.223 23.6108 122.699 23.6108H122.524Z" fill="black" />
                                    <path d="M127.489 21.0656C127.164 21.0656 126.691 21.1157 126.691 21.1157L126.666 23.9353H127.265V22.8871C127.639 22.8871 128.836 22.9372 128.836 21.889C128.836 21.1402 128.137 21.0656 127.489 21.0656ZM127.614 22.5881C127.39 22.5881 127.29 22.538 127.29 22.538V21.3901C127.29 21.3901 127.389 21.3651 127.539 21.3651C127.938 21.3651 128.287 21.4397 128.287 21.9641C128.287 22.4133 128.013 22.5881 127.614 22.5881H127.614Z" fill="black" />
                                    <path d="M132.304 21.8394C132.304 21.2404 131.905 21.0656 131.032 21.0656C130.658 21.0656 130.158 21.1157 130.158 21.1157V23.9353H130.757V21.3901C130.757 21.3901 130.907 21.3401 131.082 21.3401C131.456 21.3401 131.73 21.4898 131.73 21.889C131.73 22.2135 131.555 22.4879 131.107 22.4879H131.007V22.7123L131.83 23.9348H132.529C132.205 23.5106 131.881 23.0864 131.531 22.6622C131.98 22.5625 132.304 22.2631 132.304 21.8389V21.8394Z" fill="black" />
                                    <path d="M135.098 21.0411C134.374 21.0411 133.601 21.4402 133.626 22.5135C133.626 23.4866 134.225 23.9859 134.998 23.9859C135.697 23.9859 136.47 23.5868 136.47 22.5135C136.47 21.5404 135.871 21.0411 135.098 21.0411ZM135.098 23.6609C134.549 23.6609 134.225 23.0368 134.225 22.3382C134.225 21.7643 134.474 21.3651 134.923 21.3651C135.497 21.3651 135.821 21.9891 135.821 22.6878C135.821 23.2617 135.572 23.6609 135.097 23.6609H135.098Z" fill="black" />
                                    <path d="M138.666 21.0656C138.342 21.0656 137.868 21.1157 137.868 21.1157L137.843 23.9353H138.442V22.8871C138.816 22.8871 140.013 22.9372 140.013 21.889C140.013 21.1402 139.315 21.0656 138.666 21.0656ZM138.791 22.5881C138.566 22.5881 138.466 22.538 138.466 22.538V21.3901C138.466 21.3901 138.566 21.3651 138.716 21.3651C139.115 21.3651 139.464 21.4397 139.464 21.9641C139.464 22.4133 139.19 22.5881 138.791 22.5881Z" fill="black" />
                                    <path d="M141.934 23.6358V22.6126H143.007V22.3131H141.934V21.4147H142.134C142.658 21.4147 143.032 21.5143 143.032 21.5143V21.0901H141.335V23.9598H143.107V23.5356C143.107 23.5356 142.733 23.6353 142.209 23.6353H141.934V23.6358Z" fill="black" />
                                    <path d="M146.649 21.8394C146.649 21.2404 146.25 21.0656 145.377 21.0656C145.003 21.0656 144.503 21.1157 144.503 21.1157V23.9353H145.102V21.3901C145.102 21.3901 145.252 21.3401 145.427 21.3401C145.801 21.3401 146.075 21.4898 146.075 21.889C146.075 22.2135 145.901 22.4879 145.452 22.4879H145.352V22.7123L146.176 23.9348H146.874C146.55 23.5106 146.226 23.0864 145.876 22.6622C146.325 22.5625 146.649 22.2631 146.649 21.8389V21.8394Z" fill="black" />
                                    <path d="M147.847 21.4402H148.745L148.77 23.9103H149.369V21.4402H150.267V21.0907H147.847V21.4402Z" fill="black" />
                                    <path d="M152.064 21.0907H151.465V23.9103H152.064V21.0907Z" fill="black" />
                                    <path d="M154.234 23.6358V22.6126H155.306V22.3131H154.234V21.4147H154.434C154.957 21.4147 155.332 21.5143 155.332 21.5143V21.0901H153.635V23.9598H155.406V23.5356C155.406 23.5356 155.032 23.6353 154.508 23.6353H154.234V23.6358Z" fill="black" />
                                    <path d="M158.026 22.2886C157.652 22.1639 157.303 22.0888 157.303 21.7147C157.303 21.4903 157.477 21.3901 157.727 21.3901C158.151 21.3901 158.525 21.6646 158.525 21.6646L158.55 21.1903C158.55 21.1903 158.251 21.0656 157.752 21.0656C157.153 21.0656 156.704 21.3401 156.704 21.889C156.704 22.3878 157.103 22.5625 157.528 22.7123C157.852 22.837 158.151 22.9367 158.151 23.2612C158.151 23.5607 157.951 23.6854 157.702 23.6854C157.178 23.6854 156.729 23.3113 156.729 23.3113C156.704 23.4861 156.679 23.6609 156.704 23.8101C156.704 23.8101 157.053 23.9849 157.652 23.9849C158.251 23.9849 158.75 23.785 158.75 23.0864C158.75 22.6121 158.4 22.4128 158.026 22.2881L158.026 22.2886Z" fill="black" />
                                    <path d="M146.6 13.8794C147.473 13.8794 148.222 13.7046 148.87 13.3555C149.544 13.031 150.068 12.6068 150.442 12.108L150.167 11.7835C149.544 12.2577 148.87 12.4821 148.047 12.4821C146.924 12.4821 146.076 12.1325 145.477 11.3593C144.854 10.6105 144.579 9.6625 144.654 8.44002H150.616C150.616 7.11735 150.292 6.01956 149.594 5.17118C148.895 4.34784 147.922 3.92365 146.675 3.92365C145.103 3.92365 143.93 4.42245 143.057 5.39606C142.184 6.36914 141.785 7.56711 141.785 8.98943C141.76 10.3867 142.234 11.5596 143.132 12.4826C144.055 13.4056 145.228 13.8799 146.599 13.8799L146.6 13.8794ZM145.203 5.49519C145.502 4.8216 145.901 4.49706 146.425 4.49706C147.249 4.49706 147.673 5.54528 147.673 7.69077L144.729 7.74085C144.754 6.91751 144.904 6.16879 145.203 5.49519Z" fill="black" />
                                    <path d="M155.656 12.5818C155.381 12.8813 154.982 13.031 154.484 13.031C153.261 13.031 152.338 12.1325 151.714 10.3611L151.24 10.5109L151.34 13.2804C152.338 13.6545 153.46 13.8794 154.683 13.8794C155.905 13.8794 156.928 13.6049 157.652 13.006C158.375 12.4571 158.724 11.6588 158.724 10.6356C158.724 9.962 158.55 9.41311 158.201 8.98892C157.851 8.56472 157.253 8.21514 156.429 7.86608C155.506 7.54155 154.858 7.21753 154.533 6.94309C154.209 6.66864 154.034 6.31906 154.034 5.91991C154.034 5.49572 154.134 5.17118 154.383 4.89674C154.633 4.62229 154.932 4.52263 155.331 4.52263C156.454 4.52263 157.252 5.32093 157.751 6.91804L158.226 6.7683L158.101 4.39793C157.353 4.0734 156.405 3.87408 155.257 3.87408C154.109 3.87408 153.161 4.17358 152.487 4.77256C151.789 5.37154 151.44 6.07018 151.44 6.94361C151.44 7.69234 151.664 8.26627 152.088 8.69047C152.512 9.11466 153.161 9.46424 154.034 9.76321C154.808 10.0377 155.356 10.3121 155.656 10.5615C155.93 10.836 156.105 11.1605 156.105 11.5596C156.105 11.9337 155.955 12.3084 155.656 12.5828V12.5818Z" fill="black" />
                                    <path d="M131.755 1.55277C131.855 1.7526 131.955 2.02705 132.005 2.45124C132.055 3.24954 132.104 5.09605 132.079 7.99079C132.079 10.8605 132.054 12.6569 132.005 13.3555C133.527 13.6801 134.724 13.8298 135.622 13.8298C137.294 13.8298 138.591 13.3555 139.539 12.3825C140.487 11.4344 140.986 10.1117 140.986 8.46507C140.986 7.16745 140.637 6.06966 139.913 5.22128C139.189 4.34785 138.266 3.9487 137.194 3.9487C136.445 3.97374 135.697 4.14853 134.848 4.54768C134.848 2.92552 134.873 1.42859 134.948 0.031311L130.707 0.829607V1.20371L131.131 1.2538C131.43 1.27884 131.63 1.40354 131.754 1.55329L131.755 1.55277ZM135.822 5.04649C136.495 5.04649 137.019 5.37102 137.418 6.06966C137.793 6.7683 138.017 7.59164 138.017 8.6649C138.017 9.96253 137.793 11.0353 137.344 11.9087C136.895 12.7821 136.346 13.2063 135.647 13.2063C135.398 13.1813 135.198 13.1562 134.923 13.1312C134.873 12.2327 134.824 9.56286 134.824 5.19623C135.073 5.12162 135.423 5.04649 135.822 5.04649Z" fill="black" />
                                    <path d="M110.798 13.056L110.05 12.9814C109.601 12.9313 109.301 12.732 109.102 12.4826C108.902 12.2082 108.803 11.7589 108.778 11.16C108.703 10.0371 108.628 8.76455 108.628 7.34223L110.125 7.36727C110.923 7.39232 111.472 8.01583 111.771 9.23883H112.32V4.74751H111.771C111.497 5.94547 110.973 6.54393 110.125 6.59402L108.628 6.61907C108.628 4.124 108.678 2.3521 108.778 1.25431H110.973C112.545 1.25431 113.593 2.25244 114.191 4.2487L114.865 4.04887L114.765 0.330795H103.638V0.879689L104.237 0.929778C104.686 1.00491 104.985 1.17918 105.185 1.42858C105.385 1.70303 105.485 2.15227 105.51 2.75125C105.734 5.74564 105.734 8.56524 105.51 11.1605C105.46 11.7845 105.335 12.2087 105.185 12.4831C104.985 12.7576 104.686 12.9324 104.237 12.982L103.638 13.0566V13.6055H110.798V13.0566V13.056Z" fill="black" />
                                    <path d="M129.061 13.1061L128.312 13.0561C127.788 13.006 127.489 12.5818 127.414 11.8336C127.239 10.2114 127.214 8.49012 127.364 6.71822C127.539 6.44377 127.888 6.26898 128.437 6.21941C128.986 6.16984 129.634 6.31907 130.308 6.71822L131.356 4.12297C130.982 3.92314 130.557 3.84853 130.083 3.84853C129.609 3.84853 129.135 4.04836 128.611 4.44751C128.087 4.82161 127.688 5.37051 127.389 6.09419L127.414 3.87357L123.172 4.69691V5.07101L123.597 5.09606C124.12 5.14615 124.42 5.57034 124.495 6.31855C124.669 8.04036 124.669 9.88688 124.495 11.833C124.444 12.5818 124.145 12.9809 123.597 13.0555L123.172 13.1056V13.6295H129.06V13.1056L129.061 13.1061Z" fill="black" />
                                    <path d="M113.443 8.88873C113.443 10.3361 113.867 11.5335 114.665 12.4821C115.464 13.4301 116.661 13.8794 118.183 13.8794C119.705 13.8794 120.902 13.4051 121.8 12.432C122.698 11.484 123.098 10.286 123.098 8.83864C123.098 7.39128 122.673 6.19383 121.875 5.24527C121.077 4.29671 119.879 3.84799 118.357 3.84799C116.835 3.84799 115.638 4.32227 114.74 5.29536C113.867 6.2434 113.443 7.44137 113.443 8.88873ZM118.233 4.49706C118.832 4.47202 119.306 4.89621 119.655 5.71955C119.98 6.51785 120.13 7.59111 120.13 8.86369C120.13 11.808 119.506 13.2554 118.333 13.2554C117.71 13.2554 117.261 12.8312 116.911 12.0078C116.586 11.1845 116.437 10.1112 116.437 8.86369C116.437 5.94443 117.061 4.49706 118.234 4.49706H118.233Z" fill="black" />
                                    <path d="M103.638 18.0963H158.7V15.8756L103.638 17.7222V18.0963Z" fill="black" />
                                    <path d="M92.3476 0H91.9302V24H92.3476V0Z" fill="black" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_1945_142534">
                                        <rect width="158.75" height="24" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </button>

                        {/* ── CENTRE: Nav — absolutely centred so it doesn't depend on side column widths ── */}
                        <nav className="hidden lg:flex items-center gap-[8px] absolute left-1/2 -translate-x-1/2">
                            {navItems.map(item => (
                                <button
                                    key={item.label}
                                    className="px-[12px] py-[8px] text-[14px] text-[#3a3a3a] hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-1 whitespace-nowrap font-medium"
                                >
                                    {item.label}
                                    {item.hasDropdown && (
                                        <svg className="w-3 h-3 text-warm-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                                        </svg>
                                    )}
                                </button>
                            ))}
                        </nav>

                        {/* ── RIGHT: Hamburger + Instant Valuation (outline) + Sign In ── */}
                        <div className="flex items-center gap-2 md:gap-[8px] flex-shrink-0 z-10">

                            {/* Instant Valuation — outline style */}
                            <button className="hidden md:block px-[12px] py-[4px] border border-black text-black rounded-[16px] text-[14px] font-bold hover:bg-gray-50 transition-colors whitespace-nowrap">
                                Instant Valuation
                            </button>

                            {/* Sign In / Avatar */}
                            {user ? (
                                <button onClick={onDashboard} className="flex items-center gap-2 p-1 hover:bg-cream-100 rounded-full transition-all">
                                    <div className="w-8 h-8 rounded-full bg-accent-gold flex items-center justify-center text-white font-bold text-sm">
                                        {user.name.charAt(0)}
                                    </div>
                                </button>
                            ) : (
                                <button className="px-[16px] py-[8px] rounded-[20px] text-[14px] font-bold text-black hover:bg-gray-50 transition-colors whitespace-nowrap" style={{ boxShadow: '0px 1px 4px 0px rgba(233,233,233,0.25)' }}>
                                    Sign In
                                </button>
                            )}

                            {/* Hamburger Menu (Mobile) */}
                            <button
                                onClick={() => setIsMobileMenuOpen(true)}
                                className="lg:hidden p-2 -mr-2 text-warm-800 hover:text-warm-900 transition-colors"
                            >
                                <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            {/* Mobile Bottom Drawer Overlay */}
            {isMobileMenuOpen && (
                <div className="fixed inset-0 z-[100] lg:hidden">
                    {/* Backdrop */}
                    <div
                        className="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity"
                        onClick={() => setIsMobileMenuOpen(false)}
                    />

                    {/* Drawer */}
                    <div className="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-[-18px_-20px_40px_rgba(0,0,0,0.08)] transform transition-transform duration-300 translate-y-0">
                        <div className="p-6 pb-12 flex flex-col gap-4 max-h-[85vh] overflow-y-auto overscroll-contain">
                            <div className="w-12 h-1.5 bg-warm-200 rounded-full mx-auto mb-4" />

                            <div className="flex flex-col gap-2">
                                {navItems.map(item => (
                                    <button
                                        key={item.label}
                                        className="w-full text-left px-4 py-3 text-[16px] text-warm-800 active:bg-warm-50 rounded-xl transition-colors flex items-center justify-between font-medium border border-transparent active:border-warm-200"
                                    >
                                        {item.label}
                                        {item.hasDropdown && (
                                            <svg className="w-4 h-4 text-warm-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                            </svg>
                                        )}
                                    </button>
                                ))}
                            </div>

                            <div className="h-px bg-warm-100 my-2" />

                            <button className="w-full px-4 py-4 text-center bg-transparent border-2 border-warm-800 text-warm-800 rounded-xl text-[16px] font-bold active:bg-warm-50 transition-colors">
                                Instant Valuation
                            </button>
                        </div>
                    </div>
                </div>
            )}
        </>
    );
};
